<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="EBrmap">
<title>EB-rMAP Prior with a Time-to-Event Endpoint • EBrmap</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EB-rMAP Prior with a Time-to-Event Endpoint">
<meta property="og:description" content="EBrmap">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">EBrmap</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/TTE.html">EB-rMAP Prior with a Time-to-Event Endpoint</a>
    <a class="dropdown-item" href="../articles/normal.html">EB-rMAP Prior with a Normal Endpoint</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="TTE_files/kePrint-0.0.1/kePrint.js"></script><link href="TTE_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>EB-rMAP Prior with a Time-to-Event Endpoint</h1>
                        <h4 data-toc-skip class="author">Hongtao
Zhang</h4>
            
            <h4 data-toc-skip class="date">12/28/2022</h4>
      
      
      <div class="d-none name"><code>TTE.Rmd</code></div>
    </div>

    
    
<p>In this vignette, we showcase how the EB-rMAP method can be
implemented when a time-to-event (TTE) endpoint is of interest. It is
essentially replicating the data analysis carried out in section 4 of
Zhang et al. [1].</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The data in 10 oncology studies come from Roychoudhury and
Neueuschwander (2020) [2]. In each study, the four-year follow-up period
was partitioned into 12 intervals, and the number of events and total
exposure (follow-up) time in years were recorded. For illustration
purposes, the first 9 trials are regarded as historical trials, while
the 10th trial is considered the current trial. The full data is
displayed in the Appendix. We aggregate the data between year 0 and 1.5
to implement the EB-rMAP method for the log hazard rates.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RBesT</span><span class="op">)</span></span>
<span><span class="co">#&gt; This is RBesT version 1.6.4</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Attaching packages</span></span></span>
<span><span class="co">#&gt; ───────────────────────────────────────</span></span>
<span><span class="co">#&gt; tidyverse 1.3.2 ──</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2</span> 3.4.0      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr  </span> 1.0.0 </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble </span> 3.1.8      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr  </span> 1.0.10</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr  </span> 1.2.1      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr</span> 1.5.0 </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr  </span> 2.1.3      <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats</span> 0.5.2 </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'kableExtra'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     group_rows</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://squallteo.github.io/EBrmap/">EBrmap</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">712</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"0.00-0.25"</span>, <span class="st">"0.25-0.50"</span>, <span class="st">"0.50-0.75"</span>, <span class="st">"0.75-1.00"</span>,</span>
<span>          <span class="st">"1.00-1.25"</span>, <span class="st">"1.25-1.50"</span>, <span class="st">"1.50-1.75"</span>, <span class="st">"1.75-2.08"</span>,</span>
<span>          <span class="st">"2.08-2.50"</span>, <span class="st">"2.50-2.92"</span>, <span class="st">"2.92-3.33"</span>, <span class="st">"3.33-4.00"</span><span class="op">)</span></span>
<span><span class="va">FIOCCO.n.events</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,  <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">4</span>,  <span class="fl">3</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">2</span>,  <span class="fl">0</span>,  <span class="fl">6</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">9</span>,  <span class="fl">1</span>,  <span class="fl">0</span>, <span class="fl">10</span>,  <span class="fl">6</span>,  <span class="fl">6</span>,  <span class="fl">5</span>,  <span class="fl">9</span>,</span>
<span>                     <span class="fl">9</span>,  <span class="fl">3</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">1</span>,  <span class="fl">3</span>,  <span class="fl">5</span>,  <span class="fl">7</span>,  <span class="fl">9</span>,  <span class="fl">4</span>,  <span class="fl">5</span>, <span class="fl">10</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">3</span>,  <span class="fl">7</span>,  <span class="fl">1</span>,  <span class="fl">2</span>,  <span class="fl">2</span>,  <span class="fl">4</span>, </span>
<span>                     <span class="fl">3</span>,  <span class="fl">1</span>,  <span class="fl">3</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">5</span>,  <span class="fl">3</span>,  <span class="fl">6</span>,  <span class="fl">2</span>,  <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">0</span>,  <span class="fl">2</span>,  <span class="fl">1</span>,  <span class="fl">1</span>,  <span class="fl">1</span>,  <span class="fl">0</span>, </span>
<span>                     <span class="fl">0</span>,  <span class="fl">6</span>,  <span class="fl">3</span>, <span class="fl">12</span>,  <span class="fl">8</span>,  <span class="fl">2</span>, <span class="fl">3</span>,  <span class="fl">2</span>, <span class="fl">11</span>,  <span class="fl">1</span>,  <span class="fl">0</span>, <span class="fl">10</span>,  <span class="fl">2</span>,  <span class="fl">2</span>,  <span class="fl">5</span>,  <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">2</span>,  <span class="fl">3</span>, </span>
<span>                     <span class="fl">3</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">1</span>,  <span class="fl">3</span>,  <span class="fl">4</span>, <span class="fl">1</span>,  <span class="fl">1</span>,  <span class="fl">4</span>,  <span class="fl">1</span>,  <span class="fl">6</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">2</span>,  <span class="fl">0</span>,  <span class="fl">3</span>,  <span class="fl">1</span>, </span>
<span>                     <span class="fl">4</span>,  <span class="fl">0</span>,  <span class="fl">1</span>,  <span class="fl">1</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">0</span>,  <span class="fl">1</span>,  <span class="fl">5</span>, <span class="fl">17</span>, <span class="fl">0</span>,  <span class="fl">2</span>,  <span class="fl">7</span>,  <span class="fl">8</span>,  <span class="fl">4</span>,  <span class="fl">0</span>,  <span class="fl">6</span>,  <span class="fl">2</span>,  <span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">FIOCCO.exp.time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9.4</span>,  <span class="fl">8.8</span>,  <span class="fl">7.9</span>,  <span class="fl">7.0</span>,  <span class="fl">6.1</span>,  <span class="fl">5.8</span>,  <span class="fl">5.8</span>,  <span class="fl">7.3</span>,  <span class="fl">8.8</span>,  <span class="fl">7.6</span>,  <span class="fl">6.2</span>, <span class="fl">10.0</span>, <span class="fl">21.1</span>, </span>
<span>                     <span class="fl">19.9</span>, <span class="fl">19.8</span>, <span class="fl">18.5</span>, <span class="fl">16.5</span>, <span class="fl">15.0</span>, <span class="fl">13.6</span>, <span class="fl">15.7</span>, <span class="fl">16.2</span>, <span class="fl">13.6</span>, <span class="fl">12.5</span>, <span class="fl">20.1</span>, <span class="fl">21.9</span>, <span class="fl">21.4</span>, </span>
<span>                     <span class="fl">20.4</span>, <span class="fl">18.9</span>, <span class="fl">16.9</span>, <span class="fl">15.2</span>, <span class="fl">14.1</span>, <span class="fl">16.2</span>, <span class="fl">18.5</span>, <span class="fl">18.3</span>, <span class="fl">17.0</span>, <span class="fl">24.5</span>,  <span class="fl">5.6</span>,  <span class="fl">5.2</span>,  <span class="fl">4.8</span>, </span>
<span>                     <span class="fl">4.0</span>,  <span class="fl">3.1</span>,  <span class="fl">2.6</span>,  <span class="fl">2.1</span>,  <span class="fl">2.3</span>,  <span class="fl">2.9</span>,   <span class="fl">2.9</span>,  <span class="fl">2.9</span>,  <span class="fl">4.7</span>,  <span class="fl">6.4</span>,  <span class="fl">5.4</span>,  <span class="fl">4.2</span>,  <span class="fl">3.2</span>, </span>
<span>                     <span class="fl">2.6</span>,  <span class="fl">1.9</span>,  <span class="fl">1.5</span>,  <span class="fl">1.7</span>, <span class="fl">1.5</span>,  <span class="fl">1.0</span>,  <span class="fl">0.6</span>,  <span class="fl">0.7</span>, <span class="fl">17.8</span>, <span class="fl">17.0</span>, <span class="fl">15.9</span>, <span class="fl">14.0</span>, <span class="fl">11.5</span>, </span>
<span>                     <span class="fl">10.2</span>,  <span class="fl">9.6</span>, <span class="fl">11.9</span>, <span class="fl">12.4</span>,  <span class="fl">9.9</span>,  <span class="fl">9.4</span>, <span class="fl">12.1</span>,  <span class="fl">8.0</span>,  <span class="fl">7.5</span>,  <span class="fl">6.6</span>,  <span class="fl">5.6</span>,  <span class="fl">4.9</span>,  <span class="fl">4.1</span>, </span>
<span>                     <span class="fl">3.5</span>,  <span class="fl">3.8</span>,  <span class="fl">3.6</span>,  <span class="fl">2.9</span>,  <span class="fl">2.9</span>,  <span class="fl">4.7</span>,  <span class="fl">9.2</span>,  <span class="fl">9.1</span>,  <span class="fl">8.6</span>,  <span class="fl">7.8</span>,  <span class="fl">7.1</span>,  <span class="fl">6.9</span>,  <span class="fl">6.2</span>,  </span>
<span>                     <span class="fl">7.4</span>,  <span class="fl">8.0</span>,  <span class="fl">6.7</span>,  <span class="fl">6.6</span>, <span class="fl">10.7</span>,  <span class="fl">5.2</span>,  <span class="fl">5.0</span>,  <span class="fl">4.6</span>,  <span class="fl">4.1</span>,  <span class="fl">3.5</span>,  <span class="fl">3.0</span>,  <span class="fl">2.9</span>,  <span class="fl">3.5</span>, </span>
<span>                     <span class="fl">4.2</span>,  <span class="fl">4.2</span>,  <span class="fl">4.1</span>,  <span class="fl">6.7</span>, <span class="fl">23.4</span>, <span class="fl">22.6</span>, <span class="fl">19.9</span>, <span class="fl">17.8</span>, <span class="fl">17.5</span>, <span class="fl">16.4</span>, <span class="fl">14.5</span>, <span class="fl">17.2</span>, <span class="fl">21.0</span>, </span>
<span>                     <span class="fl">19.7</span>, <span class="fl">17.4</span>, <span class="fl">27.5</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">rmat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">FIOCCO.n.events</span>, nrow <span class="op">=</span> <span class="fl">12</span>, ncol <span class="op">=</span> <span class="fl">10</span>, byrow <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>, </span>
<span>            .name_repair <span class="op">=</span> <span class="st">"minimal"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rmat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Hist"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, <span class="st">"Curr"</span><span class="op">)</span></span>
<span><span class="va">rdt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>Interval<span class="op">=</span><span class="va">Time</span>, <span class="va">rmat</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Emat</span> <span class="op">&lt;-</span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">FIOCCO.exp.time</span>, nrow <span class="op">=</span> <span class="fl">12</span>, ncol <span class="op">=</span> <span class="fl">10</span>, byrow <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>, </span>
<span>            .name_repair <span class="op">=</span> <span class="st">"minimal"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Emat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Hist"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, <span class="st">"Curr"</span><span class="op">)</span></span>
<span><span class="va">Edt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>Interval<span class="op">=</span><span class="va">Time</span>, <span class="va">Emat</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rvec</span> <span class="op">&lt;-</span> <span class="va">rdt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,<span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Interval"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Evec</span> <span class="op">&lt;-</span> <span class="va">Edt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,<span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Interval"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colSums</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">adt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>Trial<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Hist"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, sep<span class="op">=</span><span class="st">""</span><span class="op">)</span>, <span class="st">"Curr"</span><span class="op">)</span>, NEvent<span class="op">=</span><span class="va">rvec</span>, TotExp<span class="op">=</span><span class="va">Evec</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Aggregated Data Through Year 1.5"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span>, latex_options <span class="op">=</span> <span class="st">"HOLD_position"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Aggregated Data Through Year 1.5
</caption>
<thead><tr>
<th style="text-align:left;">
Trial
</th>
<th style="text-align:right;">
NEvent
</th>
<th style="text-align:right;">
TotExp
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Hist1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
45.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist2
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
110.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist3
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
114.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist4
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
25.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist5
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
23.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist6
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
86.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist7
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
36.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist8
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
48.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Hist9
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
25.4
</td>
</tr>
<tr>
<td style="text-align:left;">
Curr
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
117.6
</td>
</tr>
</tbody>
</table>
<p>The random effect meta-analysis yields a point estimate of 0.38, and
the 95% CI is (0.282, 0.510).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">meta</span><span class="fu">::</span><span class="fu">metarate</span><span class="op">(</span><span class="va">NEvent</span>, <span class="va">TotExp</span>, <span class="va">Trial</span>, data<span class="op">=</span><span class="va">adt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,<span class="op">]</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="map-prior-and-eb-rmap-prior">MAP Prior and EB-rMAP Prior<a class="anchor" aria-label="anchor" href="#map-prior-and-eb-rmap-prior"></a>
</h2>
<p>The MAP prior is derived using the <em><code><a href="https://rdrr.io/pkg/RBesT/man/gMAP.html" class="external-link">RBesT::gMAP</a></code></em>
command via a Poisson regression. It is critical to specify the log
total exposure as the offset of the model. We use the same
specifications in section 4 of Zhang et al. [1]: a <span class="math inline">\(N(0,10^2)\)</span> hyper-prior for the overall
mean and a <span class="math inline">\(HN(0.5)\)</span> hyper-prior for
the exchangeability parameter <span class="math inline">\(\tau\)</span>.
The MAP prior is then approximated by a mixture of two Gamma
distributions (mean and number of observations, or <code>mn</code>
parameterization). The vague prior to construct the robust MAP prior is
<span class="math inline">\(Gamma(0.38,1)\)</span>, which has the same
mean with the meta-analysis but the effective sample size is only 1.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">histdt</span> <span class="op">&lt;-</span> <span class="va">adt</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">9</span>,<span class="op">]</span></span>
<span></span>
<span><span class="va">map_mcmc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RBesT/man/gMAP.html" class="external-link">gMAP</a></span><span class="op">(</span><span class="va">NEvent</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">TotExp</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span> <span class="va">Trial</span>, data <span class="op">=</span> <span class="va">histdt</span>, family <span class="op">=</span> <span class="va">poisson</span>, </span>
<span>                 tau.dist <span class="op">=</span> <span class="st">"HalfNormal"</span>, tau.prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>                 beta.prior<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">map_hat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RBesT/man/automixfit.html" class="external-link">automixfit</a></span><span class="op">(</span><span class="va">map_mcmc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; EM for Gamma Mixture Model</span></span>
<span><span class="co">#&gt; Log-Likelihood = 1447.221</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Univariate Gamma mixture</span></span>
<span><span class="co">#&gt; Mixture Components:</span></span>
<span><span class="co">#&gt;   comp1      comp2     </span></span>
<span><span class="co">#&gt; w  0.8244201  0.1755799</span></span>
<span><span class="co">#&gt; a  7.9655739  2.3129948</span></span>
<span><span class="co">#&gt; b 21.3824889  3.7639130</span></span>
<span></span>
<span><span class="op">(</span><span class="va">vague_prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RBesT/man/mixgamma.html" class="external-link">mixgamma</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.38</span>, <span class="fl">1</span><span class="op">)</span>, param <span class="op">=</span> <span class="st">"mn"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Univariate Gamma mixture</span></span>
<span><span class="co">#&gt; Mixture Components:</span></span>
<span><span class="co">#&gt;   comp1</span></span>
<span><span class="co">#&gt; w 1.00 </span></span>
<span><span class="co">#&gt; a 0.38 </span></span>
<span><span class="co">#&gt; b 1.00</span></span></code></pre></div>
<p>Suppose that we are designing a new single arm trial, augmented by
the historical data via the robust MAP prior. The projected total
exposure in the current trial is 117.6 years. We examine the behavior of
EB-rMAP weight correspoding to <span class="math inline">\(\gamma
=\)</span> 0.85, 0.9 and 0.95 respectively.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">117.6</span></span>
<span></span>
<span><span class="va">obj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EB_rMAP.html">EB_rMAP</a></span><span class="op">(</span><span class="va">map_hat</span>, <span class="va">vague_prior</span>, <span class="fl">0.85</span>, <span class="va">n</span>, <span class="va">y_range</span><span class="op">)</span></span>
<span><span class="va">obj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EB_rMAP.html">EB_rMAP</a></span><span class="op">(</span><span class="va">map_hat</span>, <span class="va">vague_prior</span>, <span class="fl">0.9</span>, <span class="va">n</span>, <span class="va">y_range</span><span class="op">)</span></span>
<span><span class="va">obj3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EB_rMAP.html">EB_rMAP</a></span><span class="op">(</span><span class="va">map_hat</span>, <span class="va">vague_prior</span>, <span class="fl">0.95</span>, <span class="va">n</span>, <span class="va">y_range</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plotdt1</span> <span class="op">&lt;-</span> <span class="va">obj1</span><span class="op">$</span><span class="va">wdt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Gamma<span class="op">=</span><span class="va">obj1</span><span class="op">$</span><span class="va">ppp_cut</span><span class="op">)</span></span>
<span><span class="va">plotdt2</span> <span class="op">&lt;-</span> <span class="va">obj2</span><span class="op">$</span><span class="va">wdt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Gamma<span class="op">=</span><span class="va">obj2</span><span class="op">$</span><span class="va">ppp_cut</span><span class="op">)</span></span>
<span><span class="va">plotdt3</span> <span class="op">&lt;-</span> <span class="va">obj3</span><span class="op">$</span><span class="va">wdt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Gamma<span class="op">=</span><span class="va">obj3</span><span class="op">$</span><span class="va">ppp_cut</span><span class="op">)</span></span>
<span><span class="va">plotdt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">plotdt1</span>, <span class="va">plotdt2</span>, <span class="va">plotdt3</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plotdt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">y</span>, y <span class="op">=</span> <span class="va">w_eb</span>, color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Gamma</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Observed Number of Events"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"EB-rMAP Weight"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept<span class="op">=</span><span class="fl">0.38</span><span class="op">*</span><span class="va">n</span>, linetype<span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Gamma"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span></code></pre></div>
<p><img src="TTE_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>We can immediately see that the choice of <span class="math inline">\(\gamma=0.95\)</span> might be too stringent, as
the weight is close to 1 even when the observed hazard rate in the
current trial is close to historical mean hazard rate. After the initial
screen, both $=$0.9 and 0.85 appear to be reasonable choices. We
recommend further evaluation via simulation studies in real
applications. For illustration purposes, we proceed with <span class="math inline">\(\gamma=0.9\)</span>.</p>
<p>Suppose that we observe 32 events in the new trial, the corresponding
<span class="math inline">\(w_{EB}\)</span> is 0.5.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/wEB.html">wEB</a></span><span class="op">(</span><span class="va">obj2</span>, <span class="fl">32</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.5</span></span></code></pre></div>
<p>We can then construct the rMAP prior with the empirical Bayes weight,
and derive the posterior distribution. Further Bayesian estimation and
inference will be based on the posterior distribution, which is also a
weighted mixture of Gamma distributions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RBesT/man/robustify.html" class="external-link">robustify</a></span><span class="op">(</span><span class="va">map_hat</span>, weight<span class="op">=</span><span class="fl">0.5</span>, mean<span class="op">=</span><span class="fl">0.38</span>, n<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">postmix_rmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RBesT/man/postmix.html" class="external-link">postmix</a></span><span class="op">(</span><span class="va">rmap</span>, n <span class="op">=</span> <span class="va">adt</span><span class="op">$</span><span class="va">TotExp</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span> , m <span class="op">=</span> <span class="va">adt</span><span class="op">$</span><span class="va">NEvent</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span><span class="op">/</span><span class="va">adt</span><span class="op">$</span><span class="va">TotExp</span><span class="op">[</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Univariate Gamma mixture</span></span>
<span><span class="co">#&gt; Mixture Components:</span></span>
<span><span class="co">#&gt;   comp1        comp2        robust      </span></span>
<span><span class="co">#&gt; w   0.70689137   0.06482092   0.22828771</span></span>
<span><span class="co">#&gt; a  39.96557392  34.31299476  32.38000000</span></span>
<span><span class="co">#&gt; b 138.98248889 121.36391299 118.60000000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="appendix-full-data">Appendix: Full Data<a class="anchor" aria-label="anchor" href="#appendix-full-data"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rdt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Number of Events"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span>, latex_options <span class="op">=</span> <span class="st">"HOLD_position"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Number of Events
</caption>
<thead><tr>
<th style="text-align:left;">
Interval
</th>
<th style="text-align:right;">
Hist1
</th>
<th style="text-align:right;">
Hist2
</th>
<th style="text-align:right;">
Hist3
</th>
<th style="text-align:right;">
Hist4
</th>
<th style="text-align:right;">
Hist5
</th>
<th style="text-align:right;">
Hist6
</th>
<th style="text-align:right;">
Hist7
</th>
<th style="text-align:right;">
Hist8
</th>
<th style="text-align:right;">
Hist9
</th>
<th style="text-align:right;">
Curr
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
0.00-0.25
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
0.25-0.50
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
0.50-0.75
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
0.75-1.00
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
1.00-1.25
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
1.25-1.50
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:left;">
1.50-1.75
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
1.75-2.08
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
2.08-2.50
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2.50-2.92
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
2.92-3.33
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
3.33-4.00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Edt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html" class="external-link">kbl</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Total Exposure (in Years)"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html" class="external-link">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span>, latex_options <span class="op">=</span> <span class="st">"HOLD_position"</span><span class="op">)</span></span></code></pre></div>
<table class="table  lightable-classic" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Total Exposure (in Years)
</caption>
<thead><tr>
<th style="text-align:left;">
Interval
</th>
<th style="text-align:right;">
Hist1
</th>
<th style="text-align:right;">
Hist2
</th>
<th style="text-align:right;">
Hist3
</th>
<th style="text-align:right;">
Hist4
</th>
<th style="text-align:right;">
Hist5
</th>
<th style="text-align:right;">
Hist6
</th>
<th style="text-align:right;">
Hist7
</th>
<th style="text-align:right;">
Hist8
</th>
<th style="text-align:right;">
Hist9
</th>
<th style="text-align:right;">
Curr
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
0.00-0.25
</td>
<td style="text-align:right;">
9.4
</td>
<td style="text-align:right;">
21.1
</td>
<td style="text-align:right;">
21.9
</td>
<td style="text-align:right;">
5.6
</td>
<td style="text-align:right;">
6.4
</td>
<td style="text-align:right;">
17.8
</td>
<td style="text-align:right;">
8.0
</td>
<td style="text-align:right;">
9.2
</td>
<td style="text-align:right;">
5.2
</td>
<td style="text-align:right;">
23.4
</td>
</tr>
<tr>
<td style="text-align:left;">
0.25-0.50
</td>
<td style="text-align:right;">
8.8
</td>
<td style="text-align:right;">
19.9
</td>
<td style="text-align:right;">
21.4
</td>
<td style="text-align:right;">
5.2
</td>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
17.0
</td>
<td style="text-align:right;">
7.5
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
22.6
</td>
</tr>
<tr>
<td style="text-align:left;">
0.50-0.75
</td>
<td style="text-align:right;">
7.9
</td>
<td style="text-align:right;">
19.8
</td>
<td style="text-align:right;">
20.4
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
15.9
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
8.6
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
19.9
</td>
</tr>
<tr>
<td style="text-align:left;">
0.75-1.00
</td>
<td style="text-align:right;">
7.0
</td>
<td style="text-align:right;">
18.5
</td>
<td style="text-align:right;">
18.9
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
14.0
</td>
<td style="text-align:right;">
5.6
</td>
<td style="text-align:right;">
7.8
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
17.8
</td>
</tr>
<tr>
<td style="text-align:left;">
1.00-1.25
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
16.5
</td>
<td style="text-align:right;">
16.9
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
17.5
</td>
</tr>
<tr>
<td style="text-align:left;">
1.25-1.50
</td>
<td style="text-align:right;">
5.8
</td>
<td style="text-align:right;">
15.0
</td>
<td style="text-align:right;">
15.2
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:right;">
1.9
</td>
<td style="text-align:right;">
10.2
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
16.4
</td>
</tr>
<tr>
<td style="text-align:left;">
1.50-1.75
</td>
<td style="text-align:right;">
5.8
</td>
<td style="text-align:right;">
13.6
</td>
<td style="text-align:right;">
14.1
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
9.6
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
14.5
</td>
</tr>
<tr>
<td style="text-align:left;">
1.75-2.08
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:right;">
15.7
</td>
<td style="text-align:right;">
16.2
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
11.9
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
17.2
</td>
</tr>
<tr>
<td style="text-align:left;">
2.08-2.50
</td>
<td style="text-align:right;">
8.8
</td>
<td style="text-align:right;">
16.2
</td>
<td style="text-align:right;">
18.5
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
12.4
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
8.0
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
21.0
</td>
</tr>
<tr>
<td style="text-align:left;">
2.50-2.92
</td>
<td style="text-align:right;">
7.6
</td>
<td style="text-align:right;">
13.6
</td>
<td style="text-align:right;">
18.3
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
9.9
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
19.7
</td>
</tr>
<tr>
<td style="text-align:left;">
2.92-3.33
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:right;">
12.5
</td>
<td style="text-align:right;">
17.0
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
9.4
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
17.4
</td>
</tr>
<tr>
<td style="text-align:left;">
3.33-4.00
</td>
<td style="text-align:right;">
10.0
</td>
<td style="text-align:right;">
20.1
</td>
<td style="text-align:right;">
24.5
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
0.7
</td>
<td style="text-align:right;">
12.1
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
10.7
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:right;">
27.5
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>[1] Zhang, H., Shen, Y., Chiang, AY., Li, J. (2022+) Adaptively
Leveraging External Data with Robust Meta-Analytical-Predictive Prior
Using Empirical Bayes.</p>
<p>[2] Roychoudhury, S., Neuenschwander, B. (2020). Bayesian leveraging
of historical control data for a clinical trial with time-to-event en
<em>Statistics in Medicine</em>, 39(7), 984-995.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Hongtao Zhang.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
